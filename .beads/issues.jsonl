{"id":"agent-sdk-1","title":"examples: LLM Profiles TUI demo","description":"Build a CLI/TUI in examples/ to run conversations with LLM profiles.\nRequirements:\n- Text UI REPL to send prompts and print assistant replies\n- /model to define and save a profile (no secrets by default)\n- /profile to switch to a saved profile at runtime\n- /list, /show, /help convenience commands\n- Persist conversation; set OPENHANDS_INLINE_CONVERSATIONS=false by default\n- Place under examples/ in a dedicated subdir and ensure it works for a user with LLM_API_KEY set\n- Add unit tests covering command parsing, profile creation and switching; avoid network calls\n- Wire into test suite and fix issues\n- Review vs main, file follow-ups, retest, and close tasks","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-06T04:32:02.652008+01:00","updated_at":"2025-11-06T18:22:43.185427+01:00","closed_at":"2025-11-06T06:26:55.602041+01:00","dependencies":[{"issue_id":"agent-sdk-1","depends_on_id":"agent-sdk-6","type":"blocks","created_at":"2025-11-06T05:02:46.584881+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-1","depends_on_id":"agent-sdk-7","type":"blocks","created_at":"2025-11-06T05:02:46.597322+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-1","depends_on_id":"agent-sdk-8","type":"blocks","created_at":"2025-11-06T05:02:46.607315+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-1","depends_on_id":"agent-sdk-9","type":"blocks","created_at":"2025-11-06T05:02:46.614844+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-1","depends_on_id":"agent-sdk-10","type":"blocks","created_at":"2025-11-06T05:02:46.621642+01:00","created_by":"enyst"}]}
{"id":"agent-sdk-10","title":"LLM Profiles: unit tests (no network)","description":"Add tests for command parsing and behavior: /model creates/saves profile, /profile switches profiles, /list and /show work; use temp dirs; avoid network calls by mocking LLM client; ensure idempotency and error cases are covered.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T05:02:38.805288+01:00","updated_at":"2025-11-06T18:22:43.186028+01:00","closed_at":"2025-11-06T06:26:55.634409+01:00"}
{"id":"agent-sdk-11","title":"LLM Profiles: /delete command","description":"Implement /delete to remove a saved profile. Confirm deletion and handle when the profile is active.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T05:09:02.209514+01:00","updated_at":"2025-11-06T18:22:43.186201+01:00","closed_at":"2025-11-06T06:32:13.51381+01:00"}
{"id":"agent-sdk-12","title":"LLM Profiles: /edit command","description":"Implement /edit to update existing profile fields. Validate updates and persist.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T05:09:02.216671+01:00","updated_at":"2025-11-06T18:22:43.186358+01:00","closed_at":"2025-11-06T06:36:44.67137+01:00"}
{"id":"agent-sdk-13","title":"LLM Profiles: default profile and persistence","description":"Support setting a default profile and persist the active profile across sessions.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T05:09:02.222569+01:00","updated_at":"2025-11-06T18:22:43.186655+01:00","closed_at":"2025-11-06T06:32:27.562198+01:00"}
{"id":"agent-sdk-14","title":"LLM Profiles: validation and provider-specific fields","description":"Validate profile schema including provider-specific required fields and constraints; normalize settings.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T05:09:02.22778+01:00","updated_at":"2025-11-06T18:22:43.186946+01:00","closed_at":"2025-11-06T06:32:27.553254+01:00"}
{"id":"agent-sdk-15","title":"LLM Switch: env var and CLI flag override","description":"Support overriding the active profile via LLM_PROFILE environment variable and a --profile flag.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T05:09:02.232811+01:00","updated_at":"2025-11-06T18:22:43.18723+01:00","closed_at":"2025-11-06T06:26:55.638492+01:00"}
{"id":"agent-sdk-16","title":"TUI: implement /delete to remove a saved profile","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-06T06:30:31.776869+01:00","updated_at":"2025-11-06T18:22:43.187493+01:00","closed_at":"2025-11-06T06:32:13.518296+01:00"}
{"id":"agent-sdk-17","title":"Registry: consider removing eager register_profiles() in LocalConversation to avoid duplicate-usage logs; rely on on-demand load in switch_profile","description":"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-11-06T06:30:31.785749+01:00","updated_at":"2025-11-06T18:22:43.187731+01:00","closed_at":"2025-11-06T06:39:24.86258+01:00"}
{"id":"agent-sdk-18","title":"Persistence: migrate profile reference expansion into LLM.model_validate context and remove manual traversal in ConversationState.create","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-06T06:30:35.426813+01:00","updated_at":"2025-11-06T18:22:43.187995+01:00","closed_at":"2025-11-06T06:38:03.230493+01:00"}
{"id":"agent-sdk-19","title":"Mac: get_closest_git_repo resolved /var -\u003e /private/var causing test failure","description":"On macOS, Path.resolve() returns canonical /private/var path which mismatched temp_dir in tests. Updated get_closest_git_repo to use Path.absolute() to avoid resolving symlinks, matching user-facing paths and fixing tests.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-06T06:55:53.490696+01:00","updated_at":"2025-11-06T18:22:43.188237+01:00","closed_at":"2025-11-06T06:55:53.502889+01:00"}
{"id":"agent-sdk-2","title":"Implement CLI/TUI and command parser","description":"Create examples/04_llm_profiles_tui CLI. Conversation REPL with commands: /help, /list, /show, /model, /profile, /exit. Integrate LLMRegistry and LocalConversation.switch_llm.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T04:32:09.319466+01:00","updated_at":"2025-11-06T18:22:43.188477+01:00","closed_at":"2025-11-06T06:26:55.610053+01:00"}
{"id":"agent-sdk-20","title":"Docs: align runtime switch docs with implementation and clarify usage_id handling","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T07:19:48.493913+01:00","updated_at":"2025-11-06T18:22:43.188714+01:00","closed_at":"2025-11-06T07:19:51.76105+01:00"}
{"id":"agent-sdk-21","title":"E2E: LLM Profiles TUI works with /model and /profile and conversation persistence","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-06T07:22:16.537304+01:00","updated_at":"2025-11-06T18:22:43.188998+01:00","closed_at":"2025-11-06T07:26:11.621885+01:00"}
{"id":"agent-sdk-22","title":"Registry: Allow loading profiles with duplicate usage_id; assign usage_id on switch","description":"","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-06T07:22:16.548056+01:00","updated_at":"2025-11-06T18:22:43.189261+01:00","closed_at":"2025-11-06T07:22:23.971924+01:00"}
{"id":"agent-sdk-23","title":"Docs: Review llm_profiles.md and runtime switch docs; align with implementation","description":"","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-11-06T07:22:16.555397+01:00","updated_at":"2025-11-06T18:22:43.189508+01:00","closed_at":"2025-11-06T07:26:11.634925+01:00"}
{"id":"agent-sdk-24","title":"Docs: clarify profile persistence responsibilities in llm_profiles.md","description":"Update key decision: make it clear LLM serializer/validator handles inline vs profile-reference; ConversationState passes context; remote APIs inline by default.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T16:51:47.40941+01:00","updated_at":"2025-11-06T18:22:43.189746+01:00","closed_at":"2025-11-06T16:51:51.648025+01:00"}
{"id":"agent-sdk-25","title":"Docs: update runtime switch plan serialization tests to serializer/context approach","description":"Replace compact_llM_profiles/resolve_llm_profiles references with the implemented LLM serializer/validator + context flow. Align tests accordingly.\n\nImplemented in commit d78ea69f.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T16:55:36.587994+01:00","updated_at":"2025-11-06T18:22:43.19014+01:00","closed_at":"2025-11-06T16:55:36.599047+01:00"}
{"id":"agent-sdk-26","title":"Docs: clarify metrics policy during LLM profile switch","description":"Continue accumulating metrics under the same usage_id; ConversationStats.register_llm restores metrics onto swapped-in LLM. Align plan doc with implementation. Fixed in commit ddf24679.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T17:05:55.70286+01:00","updated_at":"2025-11-06T18:22:43.19029+01:00","closed_at":"2025-11-06T17:06:12.527704+01:00"}
{"id":"agent-sdk-27","title":"ExecuteBash Terminal: complex commands test fails","description":"tests/tools/execute_bash/test_bash_session.py::test_complex_commands fails on tmux and subprocess terminals with exit_code -1 (NO_CHANGE_TIMEOUT). Output shows init sentinel appended and no PS1 metadata detected. Investigate TerminalSession PS1 completion detection and SubprocessTerminal/TmuxTerminal PROMPT_COMMAND/PS1 handling for long one-liner while-loops. Repro: uv run pytest -q tests/tools/execute_bash/test_bash_session.py::test_complex_commands -q. See logs for PTY reader thread closing race too.","notes":"Replicated failure in tests/tools/execute_bash/test_bash_session.py::test_complex_commands for both tmux and subprocess terminals. Observed -1 exit code (no-change timeout), and buffer shows the command echoed plus, for subprocess, remnants of initialization (export PS2; printf __OH_READY__). Hypothesis: after this chained command, PS1 prompt isn't detected reliably; possibly leftover init output or quoting interaction prevents prompt detection. Plan: instrument prompt detection around execute(); consider ensuring PS1/PS2 assignment per command or improve end-of-command detection beyond PS1-only heuristic.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-06T17:24:10.436474+01:00","updated_at":"2025-11-06T18:22:43.190454+01:00","closed_at":"2025-11-06T17:46:34.65496+01:00"}
{"id":"agent-sdk-28","title":"TUI: env var fallback for initial profile","description":"In examples/llm_profiles_tui/cli.py, support selecting initial profile via environment variable when --profile is not provided. Recognize OPENHANDS_LLM_PROFILE and LLM_PROFILE_NAME for parity with docs and examples. Add unit test that verifies main() passes the env-derived profile to build_conversation without entering the REPL (monkeypatch run_loop). Update help text in CLI and docs snippet in docs/llm_profiles.md to mention env fallback for the TUI.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-06T17:28:23.239167+01:00","updated_at":"2025-11-06T18:22:43.190612+01:00"}
{"id":"agent-sdk-29","title":"Cleanup: docs/env var naming consistency for profiles","description":"docs/llm_profiles.md mentions OPENHANDS_LLM_PROFILE; examples/01_standalone_sdk/25_llm_profiles.py uses LLM_PROFILE_NAME. Align or document both; add a note that the TUI recognizes both for convenience.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-11-06T17:28:23.245795+01:00","updated_at":"2025-11-06T18:22:43.190872+01:00"}
{"id":"agent-sdk-3","title":"Unit tests for CLI/TUI functions","description":"Test parser and actions with tmp dirs and fake conversation/registry; no network.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T04:32:09.324078+01:00","updated_at":"2025-11-06T18:22:43.191115+01:00","closed_at":"2025-11-06T06:26:55.61576+01:00"}
{"id":"agent-sdk-30","title":"LLM Switch end-to-end: TUI chat demo, registry robustness, docs sync","description":"Build a working examples/ TUI chat CLI that supports /model and /profile, ensure registry can load profiles irrespective of usage_id, keep conversation persistence intact, add tests, run and fix, update docs, compare against main, and file/fix follow-ups.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-06T17:58:24.949851+01:00","updated_at":"2025-11-06T18:22:43.19135+01:00","dependencies":[{"issue_id":"agent-sdk-30","depends_on_id":"agent-sdk-31","type":"parent-child","created_at":"2025-11-06T17:58:46.415923+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-30","depends_on_id":"agent-sdk-32","type":"parent-child","created_at":"2025-11-06T17:58:46.421315+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-30","depends_on_id":"agent-sdk-33","type":"parent-child","created_at":"2025-11-06T17:58:46.426367+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-30","depends_on_id":"agent-sdk-34","type":"parent-child","created_at":"2025-11-06T17:58:46.431051+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-30","depends_on_id":"agent-sdk-35","type":"parent-child","created_at":"2025-11-06T17:58:46.4357+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-30","depends_on_id":"agent-sdk-36","type":"parent-child","created_at":"2025-11-06T17:58:46.4411+01:00","created_by":"enyst"}]}
{"id":"agent-sdk-31","title":"Investigate LLM Profiles/Switch docs vs implementation; registry usage_id behavior; design solution","description":"Read docs/llm_profiles.md, docs/llm_runtime_switch_investigation.md, docs/llm_runtime_switch_plan.md; review code; confirm whether registry can load profiles with duplicate usage_id; design change if needed: load without usage_id and assign on switch; ensure pydantic models support usage_id=None.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-06T17:58:42.327785+01:00","updated_at":"2025-11-06T18:22:43.191515+01:00"}
{"id":"agent-sdk-32","title":"Implement examples/ chat TUI/CLI with /model and /profile; continue conversation across switches","description":"Create a runnable script in examples/ that presents a simple TUI; user can enter prompts; /model creates/edits profile; /profile switches to saved profile; ensure seamless continuation of conversation with new settings.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-06T17:58:42.333863+01:00","updated_at":"2025-11-06T18:22:43.191843+01:00","dependencies":[{"issue_id":"agent-sdk-32","depends_on_id":"agent-sdk-31","type":"blocks","created_at":"2025-11-06T17:58:46.379189+01:00","created_by":"enyst"}]}
{"id":"agent-sdk-33","title":"Unit tests for CLI/TUI core, registry loading/switch semantics, conversation persistence","description":"Write tests that don't require external LLM; mock registry/LLM; validate switching updates usage_id, conversation remains; cover profile saving/loading.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T17:58:42.339197+01:00","updated_at":"2025-11-06T18:22:43.191986+01:00","dependencies":[{"issue_id":"agent-sdk-33","depends_on_id":"agent-sdk-31","type":"blocks","created_at":"2025-11-06T17:58:46.388801+01:00","created_by":"enyst"}]}
{"id":"agent-sdk-34","title":"Run uv pytest in tmux; fix issues until green","description":"Use uv run pytest; manage long runs via tmux; iterate until tests pass.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T17:58:42.34401+01:00","updated_at":"2025-11-06T18:22:43.192137+01:00","dependencies":[{"issue_id":"agent-sdk-34","depends_on_id":"agent-sdk-33","type":"blocks","created_at":"2025-11-06T17:58:46.3971+01:00","created_by":"enyst"}]}
{"id":"agent-sdk-35","title":"Update docs to match implementation; minimal changes; keep pydantic/DiscriminatedUnion schema consistent","description":"Ensure docs/llm_profiles.md and runtime switch docs reflect the implemented behaviors. Add notes if registry change implemented.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T17:58:42.348537+01:00","updated_at":"2025-11-06T18:22:43.19233+01:00","dependencies":[{"issue_id":"agent-sdk-35","depends_on_id":"agent-sdk-31","type":"blocks","created_at":"2025-11-06T17:58:46.404111+01:00","created_by":"enyst"}]}
{"id":"agent-sdk-36","title":"Compare branch vs main; review diff; polish; file follow-ups; close tasks","description":"Use git diff main...; create any final issues; address small fixes; close bd issues.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T17:58:42.352809+01:00","updated_at":"2025-11-06T18:22:43.192547+01:00","dependencies":[{"issue_id":"agent-sdk-36","depends_on_id":"agent-sdk-34","type":"blocks","created_at":"2025-11-06T17:58:46.410132+01:00","created_by":"enyst"}]}
{"id":"agent-sdk-37","title":"ExecuteBash Terminal: test_bash_session::test_complex_commands intermittently returns -1 (no-change timeout) in tmux and subprocess","description":"Reproduce locally: uv run pytest tests/tools/execute_bash/test_bash_session.py::test_complex_commands -q. The command completes but PS1 detection sometimes fails; output shows init sentinel and PS2 assignment captured. Likely race during init/clear_screen or prompt-not-visible detection in SubprocessTerminal/TmuxTerminal. Investigate reader buffer handling and _wait_for_prompt. Ensure prompt markers are reliably present when capturing command results.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-06T18:20:08.605372+01:00","updated_at":"2025-11-06T21:36:00.649684+01:00","closed_at":"2025-11-06T21:36:00.649684+01:00"}
{"id":"agent-sdk-38","title":"Agent server wsproto tests failing to start (test_agent_server_wsproto)","description":"pytest errors: Failed: Agent server failed to start on port \u003crandom\u003e in tests/agent_server/test_agent_server_wsproto.py. Investigate port allocation and wsproto optional deps; flake? Reproduce locally and stabilize.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-06T19:49:05.874913+01:00","updated_at":"2025-11-06T22:14:24.409142+01:00","closed_at":"2025-11-06T22:14:24.409142+01:00"}
{"id":"agent-sdk-39","title":"LLM Profile Switch TUI: implement CLI in examples/ and ensure /model,/profile switching works","description":"","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-11-06T19:54:54.20569+01:00","updated_at":"2025-11-06T20:00:24.841774+01:00","closed_at":"2025-11-06T20:00:24.841774+01:00"}
{"id":"agent-sdk-4","title":"Run tests, fix any issues","description":"Run pytest, iterate until green.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T04:32:09.328398+01:00","updated_at":"2025-11-06T18:22:43.192948+01:00","closed_at":"2025-11-06T06:32:27.575476+01:00"}
{"id":"agent-sdk-40","title":"Tests: add unit tests for TUI and LLMRegistry.switch_profile and conversation persistence","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T19:55:01.293056+01:00","updated_at":"2025-11-06T20:00:24.847254+01:00","closed_at":"2025-11-06T20:00:24.847254+01:00"}
{"id":"agent-sdk-41","title":"Registry: ensure profiles with same usage_id can be loaded; assign usage_id at switch time; document behavior","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T19:55:01.304068+01:00","updated_at":"2025-11-06T20:00:24.851642+01:00","closed_at":"2025-11-06T20:00:24.851642+01:00"}
{"id":"agent-sdk-42","title":"Docs: review and align llm_profiles.md and runtime switch docs with implementation","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T19:55:01.313801+01:00","updated_at":"2025-11-06T20:00:24.856329+01:00","closed_at":"2025-11-06T20:00:24.856329+01:00"}
{"id":"agent-sdk-43","title":"Cleanup: remove unused _expand_profile_references helper; rely on LLM model validator for profile reference expansion","description":"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-11-06T20:29:27.141502+01:00","updated_at":"2025-11-06T20:29:55.263662+01:00","closed_at":"2025-11-06T20:29:55.263662+01:00"}
{"id":"agent-sdk-44","title":"LocalConversation.close should not raise when agent is uninitialized","description":"In late interpreter shutdown or custom agents that skip initialization, close() accessed tools_map and could raise RuntimeError. Fixed by guarding access and added a unit test.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-06T20:43:08.370993+01:00","updated_at":"2025-11-06T20:43:17.35214+01:00","closed_at":"2025-11-06T20:43:17.35214+01:00"}
{"id":"agent-sdk-45","title":"Docs: mention default usage_id 'default' when omitted in llm_profiles.md","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T20:56:10.315286+01:00","updated_at":"2025-11-06T20:56:25.945695+01:00","closed_at":"2025-11-06T20:56:25.945695+01:00"}
{"id":"agent-sdk-46","title":"LLM Profiles TUI: implement interactive CLI (/model, /profile, /list, /show, /save, /edit) under examples/ and ensure profile-reference persistence","description":"Add examples/llm_profiles_tui/cli.py providing a minimal TUI for conversations. Supports creating profiles with /model (ENV[...] indirection for api_key/base_url), switching with /profile (continues conversation with new settings), listing/showing/deleting/saving/editing profiles. Defaults OPENHANDS_INLINE_CONVERSATIONS=false so runtime switching works. Update README and docs with usage. Add unit tests to validate command parsing and behavior without invoking real LLMs.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-06T21:14:55.976848+01:00","updated_at":"2025-11-06T21:15:04.165062+01:00","closed_at":"2025-11-06T21:15:04.165062+01:00"}
{"id":"agent-sdk-47","title":"LLMRegistry: runtime profile switching and profile load semantics","description":"Ensure LLMRegistry.switch_profile(usage_id, profile_id) replaces the active LLM for that slot and assigns usage_id at switch time. Allow loading profiles regardless of embedded usage_id; profiles may omit usage_id (default to \"default\"). Add tests covering switch, missing profile/usage, and no-usage_id case. Document behavior in docs/llm_profiles.md and investigation/plan docs.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-06T21:14:55.983752+01:00","updated_at":"2025-11-06T21:15:04.171841+01:00","closed_at":"2025-11-06T21:15:04.171841+01:00"}
{"id":"agent-sdk-48","title":"Docs review: LLM profiles and runtime switch match implementation","description":"Review docs/llm_profiles.md, docs/llm_runtime_switch_investigation.md, docs/llm_runtime_switch_plan.md and README references. Ensure paths and commands are accurate (examples/llm_profiles_tui/cli.py, uv invocation, env var notes). Update wording to reflect serializer/validator-based persistence and registry-driven switch.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T21:14:55.989261+01:00","updated_at":"2025-11-06T21:15:04.17792+01:00","closed_at":"2025-11-06T21:15:04.17792+01:00"}
{"id":"agent-sdk-49","title":"tests: fix wsproto agent_server fixture teardown under pytest-forked","description":"Guard session-scoped fixture teardown to run only in the original parent process to avoid AssertionError('can only join a child process') in forked tests. Implemented in tests/agent_server/test_agent_server_wsproto.py. See commit 56b986e6.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-11-06T22:38:55.500772+01:00","updated_at":"2025-11-06T22:38:55.528777+01:00","closed_at":"2025-11-06T22:38:55.528777+01:00"}
{"id":"agent-sdk-5","title":"Review changes vs main, file follow-ups, close tasks","description":"Critical review, add follow-up issues if needed, close tasks and epic.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T04:32:09.332583+01:00","updated_at":"2025-11-06T18:22:43.193157+01:00","closed_at":"2025-11-06T06:32:27.581586+01:00"}
{"id":"agent-sdk-50","title":"LLM Profiles TUI: verify end-to-end and add tests","description":"","notes":"Validated TUI and tests as above.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T22:56:24.394121+01:00","updated_at":"2025-11-06T22:56:46.379821+01:00"}
{"id":"agent-sdk-51","title":"Docs review: LLM Profiles \u0026 Runtime Switch match implementation","description":"","notes":"Reviewed docs/llm_profiles.md, docs/llm_runtime_switch_investigation.md, and docs/llm_runtime_switch_plan.md. They match implementation: LLM serializer/validator handle profile refs; LocalConversation.switch_llm and LLMRegistry.switch_profile exist; TUI example and usage are present. No doc changes needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T22:56:24.405386+01:00","updated_at":"2025-11-06T22:56:53.579554+01:00"}
{"id":"agent-sdk-52","title":"Registry: ensure profiles can share usage_id and switch assigns slot usage","description":"","notes":"Verified via tests (tests/sdk/llm/test_llm_registry_profiles.py) that registry loads profiles regardless of usage_id, and switch_profile assigns the target usage_id at runtime. Also manually validated with TUI: saved profile without usage_id and switched; runtime agent.llm.usage_id preserved (agent), profile payload keeps 'default'.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T22:56:24.412708+01:00","updated_at":"2025-11-06T22:56:53.586604+01:00"}
{"id":"agent-sdk-53","title":"Example CLI polish: help text and env fallback","description":"","notes":"Example CLI already includes help text (/help) and supports initial profile via --profile or env OPENHANDS_LLM_PROFILE / LLM_PROFILE_NAME. No further changes needed.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-06T22:56:24.418803+01:00","updated_at":"2025-11-06T22:57:04.619673+01:00"}
{"id":"agent-sdk-54","title":"Run targeted tests for profiles/switch/TUI and fix issues","description":"","notes":"Ran targeted tests under uv run pytest: tests/examples/test_llm_profiles_tui.py and LLM registry/profile tests pass. Full suite shows unrelated failures in bash session and wsproto server; tracked separately (agent-sdk-56).}","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T22:56:24.423931+01:00","updated_at":"2025-11-06T22:56:53.593359+01:00"}
{"id":"agent-sdk-55","title":"Compare against main and summarize diff","description":"","notes":"Compared against upstream/main. This branch adds: LLM profiles design docs, runtime switch investigation/plan docs; LLM serializer/validator for profile references; LLMRegistry profile persistence and switch_profile(); ConversationState/LocalConversation switch_llm orchestration; examples for profiles and runtime switch; TUI at examples/llm_profiles_tui/cli.py; and comprehensive unit tests across registry, conversation persistence, and the TUI. Diff summary shows ~2262 insertions across ~30 files.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-06T22:56:24.429034+01:00","updated_at":"2025-11-06T22:59:23.957231+01:00"}
{"id":"agent-sdk-56","title":"Confirm serializer/validator context for profile refs; persistence tests","description":"","notes":"Confirmed LLM.model_serializer wraps with INLINE_CONTEXT_KEY and LLM.model_validator loads profile refs when OPENHANDS_INLINE_CONVERSATIONS=false and llm_registry present in context. Persistence round-trips covered in tests/sdk/conversation/local/test_state_serialization.py, including profile reference path and inline-mode rejection.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T22:56:24.433545+01:00","updated_at":"2025-11-06T22:56:58.601156+01:00"}
{"id":"agent-sdk-57","title":"Investigate failing tests in BashSession (tmux/subprocess) and Agent Server wsproto startup","description":"Full test run shows two failures in tests/tools/execute_bash/test_bash_session.py (complex_commands expect exit code 0, got -1) and two errors in tests/agent_server/test_agent_server_wsproto.py (server failed to start). These appear unrelated to LLM Profiles/Switch work. Reproduce locally and fix or mark xfail/skipped as appropriate.","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-11-06T22:59:30.045451+01:00","updated_at":"2025-11-07T00:45:57.604524+01:00","closed_at":"2025-11-07T00:45:57.604524+01:00"}
{"id":"agent-sdk-58","title":"LLM Profiles docs review and alignment","description":"Review docs/llm_profiles.md, docs/llm_runtime_switch_investigation.md, docs/llm_runtime_switch_plan.md; ensure they match implementation and example paths. Update if needed.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T23:19:08.245308+01:00","updated_at":"2025-11-06T23:19:27.084609+01:00","closed_at":"2025-11-06T23:19:27.084609+01:00"}
{"id":"agent-sdk-59","title":"Implement CLI/TUI demo for LLM Profiles","description":"Add examples/llm_profiles_tui/cli.py to run conversations, handle /model, /profile, /list, /show, /save, /edit, /delete; default to profile references; env fallbacks.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-11-06T23:19:08.251754+01:00","updated_at":"2025-11-06T23:19:27.059375+01:00","closed_at":"2025-11-06T23:19:27.059375+01:00"}
{"id":"agent-sdk-6","title":"LLM Profiles: schema and persistence","description":"Define profile schema (model, provider, params); implement load/save (no secrets by default); support env var resolution for secrets; store under examples/ app-specific config; validate and provide helpful errors.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T05:02:11.551717+01:00","updated_at":"2025-11-06T18:22:43.193388+01:00","closed_at":"2025-11-06T06:32:27.568837+01:00"}
{"id":"agent-sdk-60","title":"Unit tests for CLI/TUI and profile switching","description":"Add tests/examples/test_llm_profiles_tui.py; extend convo switch tests; registry load/switch tests incl. profiles without usage_id.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-06T23:19:14.664694+01:00","updated_at":"2025-11-06T23:19:27.06697+01:00","closed_at":"2025-11-06T23:19:27.06697+01:00"}
{"id":"agent-sdk-61","title":"Verify registry loads profiles with duplicate usage_id and assign usage on switch","description":"Ensure LLMRegistry.load_profile accepts profiles omitting usage_id or sharing same usage_id; switch_profile assigns runtime usage_id. Add tests.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-06T23:19:14.671836+01:00","updated_at":"2025-11-06T23:19:27.073497+01:00","closed_at":"2025-11-06T23:19:27.073497+01:00"}
{"id":"agent-sdk-62","title":"Run full test suite under uv and fix issues","description":"Use tmux to run uv run pytest for the workspace; ensure all tests pass. Capture logs.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T23:19:14.678487+01:00","updated_at":"2025-11-06T23:19:27.079204+01:00","closed_at":"2025-11-06T23:19:27.079204+01:00"}
{"id":"agent-sdk-63","title":"README and examples index update","description":"Add links to new TUI example and runtime LLM switch example in README examples section.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T23:19:14.684403+01:00","updated_at":"2025-11-06T23:19:27.089629+01:00","closed_at":"2025-11-06T23:19:27.089629+01:00"}
{"id":"agent-sdk-64","title":"Audit docs: llm_profiles.md, llm_runtime_switch_investigation.md, llm_runtime_switch_plan.md; verify alignment with implementation; update as needed","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-06T23:33:38.17834+01:00","updated_at":"2025-11-06T23:41:14.277737+01:00","closed_at":"2025-11-06T23:41:14.277737+01:00"}
{"id":"agent-sdk-65","title":"Investigate profile registry usage_id handling; load profiles regardless of usage_id; design solution for assigning usage_id at switch time","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-06T23:33:38.18734+01:00","updated_at":"2025-11-06T23:41:14.285953+01:00","closed_at":"2025-11-06T23:41:14.285953+01:00"}
{"id":"agent-sdk-66","title":"Implement registry and model changes if needed: make usage_id optional, allow usage_id=None in LLM model","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-06T23:33:38.193814+01:00","updated_at":"2025-11-06T23:41:14.292206+01:00","closed_at":"2025-11-06T23:41:14.292206+01:00"}
{"id":"agent-sdk-67","title":"Build examples/tui_chat: CLI/TUI REPL supports conversation, /model to define profiles, /profile to switch; persists conversation","description":"","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-11-06T23:33:38.199487+01:00","updated_at":"2025-11-06T23:41:14.297899+01:00","closed_at":"2025-11-06T23:41:14.297899+01:00"}
{"id":"agent-sdk-68","title":"Unit tests: profile registry loading, switching behavior, CLI command parsing and state transitions, conversation persistence","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-06T23:33:38.204888+01:00","updated_at":"2025-11-06T23:41:14.303368+01:00","closed_at":"2025-11-06T23:41:14.303368+01:00"}
{"id":"agent-sdk-69","title":"Run tests with uv; fix failures; ensure e2e works with LLM_PROXY","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T23:33:38.210079+01:00","updated_at":"2025-11-06T23:41:14.308506+01:00","closed_at":"2025-11-06T23:41:14.308506+01:00"}
{"id":"agent-sdk-7","title":"LLM Switch: /profile command","description":"Implement runtime /profile \u003cname\u003e to activate a saved profile; ensure active provider/model update takes effect immediately; optionally persist active selection; clear error for unknown profile; show current profile in prompt/status.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T05:02:38.785113+01:00","updated_at":"2025-11-06T18:22:43.193586+01:00","closed_at":"2025-11-06T06:26:55.620781+01:00"}
{"id":"agent-sdk-70","title":"Compare diff against main; polish; update docs; create follow-ups and close issues","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T23:33:38.215549+01:00","updated_at":"2025-11-06T23:41:14.313268+01:00","closed_at":"2025-11-06T23:41:14.313268+01:00"}
{"id":"agent-sdk-71","title":"examples: TUI default usage_id to 'agent' unless explicitly set","description":"","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-11-06T23:53:28.177801+01:00","updated_at":"2025-11-06T23:53:40.355455+01:00","closed_at":"2025-11-06T23:53:40.355455+01:00"}
{"id":"agent-sdk-72","title":"Verify docs align with implementation and example path is in README","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T23:53:40.366564+01:00","updated_at":"2025-11-06T23:53:40.376495+01:00","closed_at":"2025-11-06T23:53:40.376495+01:00"}
{"id":"agent-sdk-73","title":"Browser executor e2e tests failing locally â€“ investigate flakiness and environment requirements","description":"In uv run pytest, 5 failures occurred in tests/tools/browser_use/test_browser_executor_e2e.py (navigate/get_state/click/type/get_content). Likely environment- or sandbox-dependent; not part of LLM Profile Switch scope. Reproduce and stabilize or mark appropriately.","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-11-07T00:12:12.241924+01:00","updated_at":"2025-11-07T00:45:57.61508+01:00","closed_at":"2025-11-07T00:45:57.61508+01:00"}
{"id":"agent-sdk-8","title":"LLM Profiles: /model command to define and save profile","description":"Implement /model to set provider:model and create a named profile; include /name flag to override default name; do not store secrets; validate provider+model pair; prompt helpful guidance if API key missing or unset.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T05:02:38.792642+01:00","updated_at":"2025-11-06T18:22:43.193793+01:00","closed_at":"2025-11-06T06:26:55.625557+01:00"}
{"id":"agent-sdk-9","title":"LLM Profiles: /list and /show commands","description":"Implement /list to enumerate saved profiles with active marker; implement /show \u003cname\u003e to display profile details without secrets; friendly formatting and sorting.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T05:02:38.799319+01:00","updated_at":"2025-11-06T18:22:43.193996+01:00","closed_at":"2025-11-06T06:26:55.63+01:00"}
