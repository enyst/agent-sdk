{"id":"agent-sdk-1","title":"examples: LLM Profiles TUI demo","description":"Build a CLI/TUI in examples/ to run conversations with LLM profiles.\nRequirements:\n- Text UI REPL to send prompts and print assistant replies\n- /model to define and save a profile (no secrets by default)\n- /profile to switch to a saved profile at runtime\n- /list, /show, /help convenience commands\n- Persist conversation; set OPENHANDS_INLINE_CONVERSATIONS=false by default\n- Place under examples/ in a dedicated subdir and ensure it works for a user with LLM_API_KEY set\n- Add unit tests covering command parsing, profile creation and switching; avoid network calls\n- Wire into test suite and fix issues\n- Review vs main, file follow-ups, retest, and close tasks","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-06T04:32:02.652008+01:00","updated_at":"2025-11-06T07:02:35.65995+01:00","closed_at":"2025-11-06T06:26:55.602041+01:00","dependencies":[{"issue_id":"agent-sdk-1","depends_on_id":"agent-sdk-6","type":"blocks","created_at":"2025-11-06T05:02:46.584881+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-1","depends_on_id":"agent-sdk-7","type":"blocks","created_at":"2025-11-06T05:02:46.597322+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-1","depends_on_id":"agent-sdk-8","type":"blocks","created_at":"2025-11-06T05:02:46.607315+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-1","depends_on_id":"agent-sdk-9","type":"blocks","created_at":"2025-11-06T05:02:46.614844+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-1","depends_on_id":"agent-sdk-10","type":"blocks","created_at":"2025-11-06T05:02:46.621642+01:00","created_by":"enyst"}]}
{"id":"agent-sdk-10","title":"LLM Profiles: unit tests (no network)","description":"Add tests for command parsing and behavior: /model creates/saves profile, /profile switches profiles, /list and /show work; use temp dirs; avoid network calls by mocking LLM client; ensure idempotency and error cases are covered.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T05:02:38.805288+01:00","updated_at":"2025-11-06T07:02:35.660794+01:00","closed_at":"2025-11-06T06:26:55.634409+01:00"}
{"id":"agent-sdk-11","title":"LLM Profiles: /delete command","description":"Implement /delete to remove a saved profile. Confirm deletion and handle when the profile is active.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T05:09:02.209514+01:00","updated_at":"2025-11-06T07:02:35.661147+01:00","closed_at":"2025-11-06T06:32:13.51381+01:00"}
{"id":"agent-sdk-12","title":"LLM Profiles: /edit command","description":"Implement /edit to update existing profile fields. Validate updates and persist.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T05:09:02.216671+01:00","updated_at":"2025-11-06T07:02:35.661475+01:00","closed_at":"2025-11-06T06:36:44.67137+01:00"}
{"id":"agent-sdk-13","title":"LLM Profiles: default profile and persistence","description":"Support setting a default profile and persist the active profile across sessions.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T05:09:02.222569+01:00","updated_at":"2025-11-06T07:02:35.661823+01:00","closed_at":"2025-11-06T06:32:27.562198+01:00"}
{"id":"agent-sdk-14","title":"LLM Profiles: validation and provider-specific fields","description":"Validate profile schema including provider-specific required fields and constraints; normalize settings.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T05:09:02.22778+01:00","updated_at":"2025-11-06T07:02:35.662149+01:00","closed_at":"2025-11-06T06:32:27.553254+01:00"}
{"id":"agent-sdk-15","title":"LLM Switch: env var and CLI flag override","description":"Support overriding the active profile via LLM_PROFILE environment variable and a --profile flag.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T05:09:02.232811+01:00","updated_at":"2025-11-06T07:02:35.662464+01:00","closed_at":"2025-11-06T06:26:55.638492+01:00"}
{"id":"agent-sdk-16","title":"TUI: implement /delete to remove a saved profile","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-06T06:30:31.776869+01:00","updated_at":"2025-11-06T07:02:35.662775+01:00","closed_at":"2025-11-06T06:32:13.518296+01:00"}
{"id":"agent-sdk-17","title":"Registry: consider removing eager register_profiles() in LocalConversation to avoid duplicate-usage logs; rely on on-demand load in switch_profile","description":"","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-11-06T06:30:31.785749+01:00","updated_at":"2025-11-06T07:02:35.663085+01:00","closed_at":"2025-11-06T06:39:24.86258+01:00"}
{"id":"agent-sdk-18","title":"Persistence: migrate profile reference expansion into LLM.model_validate context and remove manual traversal in ConversationState.create","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-06T06:30:35.426813+01:00","updated_at":"2025-11-06T07:02:35.663421+01:00","closed_at":"2025-11-06T06:38:03.230493+01:00"}
{"id":"agent-sdk-19","title":"Mac: get_closest_git_repo resolved /var -\u003e /private/var causing test failure","description":"On macOS, Path.resolve() returns canonical /private/var path which mismatched temp_dir in tests. Updated get_closest_git_repo to use Path.absolute() to avoid resolving symlinks, matching user-facing paths and fixing tests.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-06T06:55:53.490696+01:00","updated_at":"2025-11-06T07:02:35.66373+01:00","closed_at":"2025-11-06T06:55:53.502889+01:00"}
{"id":"agent-sdk-2","title":"Implement CLI/TUI and command parser","description":"Create examples/04_llm_profiles_tui CLI. Conversation REPL with commands: /help, /list, /show, /model, /profile, /exit. Integrate LLMRegistry and LocalConversation.switch_llm.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T04:32:09.319466+01:00","updated_at":"2025-11-06T07:02:35.664047+01:00","closed_at":"2025-11-06T06:26:55.610053+01:00"}
{"id":"agent-sdk-20","title":"Docs: align runtime switch docs with implementation and clarify usage_id handling","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T07:19:48.493913+01:00","updated_at":"2025-11-06T07:19:51.76105+01:00","closed_at":"2025-11-06T07:19:51.76105+01:00"}
{"id":"agent-sdk-21","title":"E2E: LLM Profiles TUI works with /model and /profile and conversation persistence","description":"","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-06T07:22:16.537304+01:00","updated_at":"2025-11-06T07:26:11.621885+01:00","closed_at":"2025-11-06T07:26:11.621885+01:00"}
{"id":"agent-sdk-22","title":"Registry: Allow loading profiles with duplicate usage_id; assign usage_id on switch","description":"","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-06T07:22:16.548056+01:00","updated_at":"2025-11-06T07:22:23.971924+01:00","closed_at":"2025-11-06T07:22:23.971924+01:00"}
{"id":"agent-sdk-23","title":"Docs: Review llm_profiles.md and runtime switch docs; align with implementation","description":"","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-11-06T07:22:16.555397+01:00","updated_at":"2025-11-06T07:26:11.634925+01:00","closed_at":"2025-11-06T07:26:11.634925+01:00"}
{"id":"agent-sdk-24","title":"Docs: clarify profile persistence responsibilities in llm_profiles.md","description":"Update key decision: make it clear LLM serializer/validator handles inline vs profile-reference; ConversationState passes context; remote APIs inline by default.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T16:51:47.40941+01:00","updated_at":"2025-11-06T16:51:51.648025+01:00","closed_at":"2025-11-06T16:51:51.648025+01:00"}
{"id":"agent-sdk-25","title":"Docs: update runtime switch plan serialization tests to serializer/context approach","description":"Replace compact_llM_profiles/resolve_llm_profiles references with the implemented LLM serializer/validator + context flow. Align tests accordingly.\n\nImplemented in commit d78ea69f.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T16:55:36.587994+01:00","updated_at":"2025-11-06T16:55:36.599047+01:00","closed_at":"2025-11-06T16:55:36.599047+01:00"}
{"id":"agent-sdk-26","title":"Docs: clarify metrics policy during LLM profile switch","description":"Continue accumulating metrics under the same usage_id; ConversationStats.register_llm restores metrics onto swapped-in LLM. Align plan doc with implementation. Fixed in commit ddf24679.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T17:05:55.70286+01:00","updated_at":"2025-11-06T17:06:12.527704+01:00","closed_at":"2025-11-06T17:06:12.527704+01:00"}
{"id":"agent-sdk-27","title":"ExecuteBash Terminal: complex commands test fails","description":"tests/tools/execute_bash/test_bash_session.py::test_complex_commands fails on tmux and subprocess terminals with exit_code -1 (NO_CHANGE_TIMEOUT). Output shows init sentinel appended and no PS1 metadata detected. Investigate TerminalSession PS1 completion detection and SubprocessTerminal/TmuxTerminal PROMPT_COMMAND/PS1 handling for long one-liner while-loops. Repro: uv run pytest -q tests/tools/execute_bash/test_bash_session.py::test_complex_commands -q. See logs for PTY reader thread closing race too.","notes":"Replicated failure in tests/tools/execute_bash/test_bash_session.py::test_complex_commands for both tmux and subprocess terminals. Observed -1 exit code (no-change timeout), and buffer shows the command echoed plus, for subprocess, remnants of initialization (export PS2; printf __OH_READY__). Hypothesis: after this chained command, PS1 prompt isn't detected reliably; possibly leftover init output or quoting interaction prevents prompt detection. Plan: instrument prompt detection around execute(); consider ensuring PS1/PS2 assignment per command or improve end-of-command detection beyond PS1-only heuristic.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-06T17:24:10.436474+01:00","updated_at":"2025-11-06T17:46:34.65496+01:00","closed_at":"2025-11-06T17:46:34.65496+01:00"}
{"id":"agent-sdk-28","title":"TUI: env var fallback for initial profile","description":"In examples/llm_profiles_tui/cli.py, support selecting initial profile via environment variable when --profile is not provided. Recognize OPENHANDS_LLM_PROFILE and LLM_PROFILE_NAME for parity with docs and examples. Add unit test that verifies main() passes the env-derived profile to build_conversation without entering the REPL (monkeypatch run_loop). Update help text in CLI and docs snippet in docs/llm_profiles.md to mention env fallback for the TUI.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-06T17:28:23.239167+01:00","updated_at":"2025-11-06T17:29:03.746602+01:00"}
{"id":"agent-sdk-29","title":"Cleanup: docs/env var naming consistency for profiles","description":"docs/llm_profiles.md mentions OPENHANDS_LLM_PROFILE; examples/01_standalone_sdk/25_llm_profiles.py uses LLM_PROFILE_NAME. Align or document both; add a note that the TUI recognizes both for convenience.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-11-06T17:28:23.245795+01:00","updated_at":"2025-11-06T17:29:03.751302+01:00"}
{"id":"agent-sdk-3","title":"Unit tests for CLI/TUI functions","description":"Test parser and actions with tmp dirs and fake conversation/registry; no network.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T04:32:09.324078+01:00","updated_at":"2025-11-06T07:02:35.664299+01:00","closed_at":"2025-11-06T06:26:55.61576+01:00"}
{"id":"agent-sdk-30","title":"LLM Switch end-to-end: TUI chat demo, registry robustness, docs sync","description":"Build a working examples/ TUI chat CLI that supports /model and /profile, ensure registry can load profiles irrespective of usage_id, keep conversation persistence intact, add tests, run and fix, update docs, compare against main, and file/fix follow-ups.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-06T17:58:24.949851+01:00","updated_at":"2025-11-06T18:20:18.221757+01:00","dependencies":[{"issue_id":"agent-sdk-30","depends_on_id":"agent-sdk-31","type":"parent-child","created_at":"2025-11-06T17:58:46.415923+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-30","depends_on_id":"agent-sdk-32","type":"parent-child","created_at":"2025-11-06T17:58:46.421315+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-30","depends_on_id":"agent-sdk-33","type":"parent-child","created_at":"2025-11-06T17:58:46.426367+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-30","depends_on_id":"agent-sdk-34","type":"parent-child","created_at":"2025-11-06T17:58:46.431051+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-30","depends_on_id":"agent-sdk-35","type":"parent-child","created_at":"2025-11-06T17:58:46.4357+01:00","created_by":"enyst"},{"issue_id":"agent-sdk-30","depends_on_id":"agent-sdk-36","type":"parent-child","created_at":"2025-11-06T17:58:46.4411+01:00","created_by":"enyst"}]}
{"id":"agent-sdk-31","title":"Investigate LLM Profiles/Switch docs vs implementation; registry usage_id behavior; design solution","description":"Read docs/llm_profiles.md, docs/llm_runtime_switch_investigation.md, docs/llm_runtime_switch_plan.md; review code; confirm whether registry can load profiles with duplicate usage_id; design change if needed: load without usage_id and assign on switch; ensure pydantic models support usage_id=None.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-11-06T17:58:42.327785+01:00","updated_at":"2025-11-06T18:20:18.173577+01:00"}
{"id":"agent-sdk-32","title":"Implement examples/ chat TUI/CLI with /model and /profile; continue conversation across switches","description":"Create a runnable script in examples/ that presents a simple TUI; user can enter prompts; /model creates/edits profile; /profile switches to saved profile; ensure seamless continuation of conversation with new settings.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-06T17:58:42.333863+01:00","updated_at":"2025-11-06T18:20:18.184727+01:00","dependencies":[{"issue_id":"agent-sdk-32","depends_on_id":"agent-sdk-31","type":"blocks","created_at":"2025-11-06T17:58:46.379189+01:00","created_by":"enyst"}]}
{"id":"agent-sdk-33","title":"Unit tests for CLI/TUI core, registry loading/switch semantics, conversation persistence","description":"Write tests that don't require external LLM; mock registry/LLM; validate switching updates usage_id, conversation remains; cover profile saving/loading.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T17:58:42.339197+01:00","updated_at":"2025-11-06T18:20:18.195066+01:00","dependencies":[{"issue_id":"agent-sdk-33","depends_on_id":"agent-sdk-31","type":"blocks","created_at":"2025-11-06T17:58:46.388801+01:00","created_by":"enyst"}]}
{"id":"agent-sdk-34","title":"Run uv pytest in tmux; fix issues until green","description":"Use uv run pytest; manage long runs via tmux; iterate until tests pass.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T17:58:42.34401+01:00","updated_at":"2025-11-06T18:20:18.203005+01:00","dependencies":[{"issue_id":"agent-sdk-34","depends_on_id":"agent-sdk-33","type":"blocks","created_at":"2025-11-06T17:58:46.3971+01:00","created_by":"enyst"}]}
{"id":"agent-sdk-35","title":"Update docs to match implementation; minimal changes; keep pydantic/DiscriminatedUnion schema consistent","description":"Ensure docs/llm_profiles.md and runtime switch docs reflect the implemented behaviors. Add notes if registry change implemented.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T17:58:42.348537+01:00","updated_at":"2025-11-06T18:20:18.209758+01:00","dependencies":[{"issue_id":"agent-sdk-35","depends_on_id":"agent-sdk-31","type":"blocks","created_at":"2025-11-06T17:58:46.404111+01:00","created_by":"enyst"}]}
{"id":"agent-sdk-36","title":"Compare branch vs main; review diff; polish; file follow-ups; close tasks","description":"Use git diff main...; create any final issues; address small fixes; close bd issues.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T17:58:42.352809+01:00","updated_at":"2025-11-06T18:20:18.215994+01:00","dependencies":[{"issue_id":"agent-sdk-36","depends_on_id":"agent-sdk-34","type":"blocks","created_at":"2025-11-06T17:58:46.410132+01:00","created_by":"enyst"}]}
{"id":"agent-sdk-37","title":"ExecuteBash Terminal: test_bash_session::test_complex_commands intermittently returns -1 (no-change timeout) in tmux and subprocess","description":"Reproduce locally: uv run pytest tests/tools/execute_bash/test_bash_session.py::test_complex_commands -q. The command completes but PS1 detection sometimes fails; output shows init sentinel and PS2 assignment captured. Likely race during init/clear_screen or prompt-not-visible detection in SubprocessTerminal/TmuxTerminal. Investigate reader buffer handling and _wait_for_prompt. Ensure prompt markers are reliably present when capturing command results.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-11-06T18:20:08.605372+01:00","updated_at":"2025-11-06T18:20:08.605372+01:00"}
{"id":"agent-sdk-4","title":"Run tests, fix any issues","description":"Run pytest, iterate until green.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T04:32:09.328398+01:00","updated_at":"2025-11-06T07:02:35.664571+01:00","closed_at":"2025-11-06T06:32:27.575476+01:00"}
{"id":"agent-sdk-5","title":"Review changes vs main, file follow-ups, close tasks","description":"Critical review, add follow-up issues if needed, close tasks and epic.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T04:32:09.332583+01:00","updated_at":"2025-11-06T07:02:35.664813+01:00","closed_at":"2025-11-06T06:32:27.581586+01:00"}
{"id":"agent-sdk-6","title":"LLM Profiles: schema and persistence","description":"Define profile schema (model, provider, params); implement load/save (no secrets by default); support env var resolution for secrets; store under examples/ app-specific config; validate and provide helpful errors.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T05:02:11.551717+01:00","updated_at":"2025-11-06T07:02:35.665062+01:00","closed_at":"2025-11-06T06:32:27.568837+01:00"}
{"id":"agent-sdk-7","title":"LLM Switch: /profile command","description":"Implement runtime /profile \u003cname\u003e to activate a saved profile; ensure active provider/model update takes effect immediately; optionally persist active selection; clear error for unknown profile; show current profile in prompt/status.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T05:02:38.785113+01:00","updated_at":"2025-11-06T07:02:35.665305+01:00","closed_at":"2025-11-06T06:26:55.620781+01:00"}
{"id":"agent-sdk-8","title":"LLM Profiles: /model command to define and save profile","description":"Implement /model to set provider:model and create a named profile; include /name flag to override default name; do not store secrets; validate provider+model pair; prompt helpful guidance if API key missing or unset.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-06T05:02:38.792642+01:00","updated_at":"2025-11-06T07:02:35.665552+01:00","closed_at":"2025-11-06T06:26:55.625557+01:00"}
{"id":"agent-sdk-9","title":"LLM Profiles: /list and /show commands","description":"Implement /list to enumerate saved profiles with active marker; implement /show \u003cname\u003e to display profile details without secrets; friendly formatting and sorting.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T05:02:38.799319+01:00","updated_at":"2025-11-06T07:02:35.665832+01:00","closed_at":"2025-11-06T06:26:55.63+01:00"}
